<!doctype html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>éŸ»å¾‹é«”æ“å­¸é™¢</title>
  <!-- å¼•å…¥ LINE LIFF SDK -->
  <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  
  <style>
    :root {
      --primary: #8b7355;
      --secondary: #c4a57b;
      --bg: #faf8f5;
      --white: #ffffff;
      --border: #f5efe6;
      --text: #6b5d4f;
      --nav-height: 60px;
    }

    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      -webkit-tap-highlight-color: transparent;
      padding-bottom: var(--nav-height); /* é ç•™åº•éƒ¨å°è¦½åˆ—ç©ºé–“ */
    }

    * { box-sizing: border-box; }

    /* Header */
    .app-header {
      background: var(--white);
      padding: 16px;
      text-align: center;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .header-icon { font-size: 24px; }
    .header-title { margin: 0; font-size: 18px; color: var(--primary); font-weight: bold; }

    /* Main Content */
    .main-content {
      padding: 20px 16px;
      max-width: 600px; /* é™åˆ¶æœ€å¤§å¯¬åº¦ï¼Œåœ¨å¹³æ¿/æ¡Œæ©Ÿä¹Ÿä¸æœƒå¤ªå¯¬ */
      margin: 0 auto;
    }

    /* Pages Logic */
    .page { display: none; animation: fadeIn 0.3s ease; }
    .page.active { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    /* Cards & UI Components */
    .card {
      background: var(--white);
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.03);
      border: 1px solid var(--border);
    }

    h2 { color: var(--primary); font-size: 22px; margin-bottom: 16px; border-left: 4px solid var(--secondary); padding-left: 10px; }
    h3 { color: var(--primary); font-size: 18px; margin-bottom: 12px; }
    p { line-height: 1.6; margin-bottom: 12px; font-size: 15px; }

    /* Feature Grid (Mobile Optimized) */
    .feature-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 20px;
    }
    .feature-item {
      background: var(--white);
      padding: 16px;
      border-radius: 12px;
      text-align: center;
      border: 1px solid var(--border);
    }
    .feature-icon { font-size: 32px; margin-bottom: 8px; }
    .feature-title { font-weight: bold; color: var(--primary); font-size: 14px; margin: 0; }

    /* Course Cards */
    .course-card {
      background: var(--white);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 16px;
      border-left: 5px solid var(--secondary);
    }
    .course-title { font-size: 18px; font-weight: bold; color: var(--primary); margin: 0 0 8px 0; }
    .tag {
      display: inline-block;
      background: #f5efe6;
      color: var(--primary);
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      margin-right: 5px;
    }

    /* Tables */
    .table-container { overflow-x: auto; -webkit-overflow-scrolling: touch; }
    table { width: 100%; border-collapse: collapse; min-width: 300px; font-size: 14px; }
    th, td { padding: 12px 8px; text-align: left; border-bottom: 1px solid var(--border); white-space: nowrap; }
    th { background: #faf8f5; color: var(--primary); }

    /* Forms */
    .form-group { margin-bottom: 16px; }
    .form-label { display: block; margin-bottom: 6px; color: var(--primary); font-weight: 500; font-size: 14px; }
    .form-input, .form-textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      font-size: 16px; /* é˜²æ­¢ iOS ç¸®æ”¾ */
      background: #fdfdfd;
    }
    .form-input:focus { outline: none; border-color: var(--secondary); }
    
    .btn-submit {
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, var(--secondary), var(--primary));
      color: white;
      border: none;
      border-radius: 50px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(139, 115, 85, 0.3);
    }
    .btn-submit:active { transform: scale(0.98); }

    /* User Profile Section (LIFF) */
    #user-info {
      display: none;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
      padding: 10px;
      background: #f0f9ff;
      border-radius: 8px;
      color: #005c99;
      font-size: 14px;
    }
    #user-avatar { width: 30px; height: 30px; border-radius: 50%; }

    /* Bottom Navigation Bar */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: var(--nav-height);
      background: var(--white);
      display: flex;
      justify-content: space-around;
      align-items: center;
      border-top: 1px solid var(--border);
      box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
      z-index: 1000;
    }

    .nav-item {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: #999;
      font-size: 10px;
      height: 100%;
      cursor: pointer;
      background: none;
      border: none;
      padding: 0;
    }

    .nav-item.active { color: var(--primary); }
    .nav-icon { font-size: 20px; margin-bottom: 2px; }

    /* Safe Area for iPhone X+ */
    @supports (padding-bottom: env(safe-area-inset-bottom)) {
      .bottom-nav { padding-bottom: env(safe-area-inset-bottom); height: calc(var(--nav-height) + env(safe-area-inset-bottom)); }
      body { padding-bottom: calc(var(--nav-height) + env(safe-area-inset-bottom) + 20px); }
    }
  </style>
</head>
<body>

  <!-- Top Header -->
  <header class="app-header">
    <div class="header-icon">ğŸ€</div>
    <h1 class="header-title">éŸ»å¾‹é«”æ“å­¸é™¢</h1>
  </header>

  <main class="main-content">
    
    <!-- Page: Home/About -->
    <div id="home" class="page active">
      <div class="card" style="background: linear-gradient(135deg, #f5efe6 0%, #ffffff 100%); text-align: center;">
        <h2 style="border:none; text-align:center; font-size: 24px;">å„ªé›…èˆå‹• â€¢ è‡ªä¿¡æˆé•·</h2>
        <p>æ­¡è¿ä¾†åˆ°æœ€å°ˆæ¥­çš„éŸ»å¾‹é«”æ“æ•™å®¤ã€‚<br>è®“æˆ‘å€‘ä¸€èµ·åœ¨é‹å‹•ä¸­ç™¼ç¾æ›´ç¾çš„è‡ªå·±ã€‚</p>
        <button class="btn-submit" onclick="switchTab('courses')" style="width: auto; padding: 10px 24px; font-size: 14px;">æŸ¥çœ‹èª²ç¨‹</button>
      </div>

      <h2>å­¸é™¢ç‰¹è‰²</h2>
      <div class="feature-grid">
        <div class="feature-item">
          <div class="feature-icon">âœ¨</div>
          <p class="feature-title">åœ‹æ‰‹å¸«è³‡</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">ğŸ©°</div>
          <p class="feature-title">å„ªé›…å„€æ…‹</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">ğŸ’ª</div>
          <p class="feature-title">æ ¸å¿ƒé«”èƒ½</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">ğŸ†</div>
          <p class="feature-title">å®šæœŸæª¢å®š</p>
        </div>
      </div>
      
      <div class="card">
        <h3>ç‚ºä»€éº¼é¸æ“‡æˆ‘å€‘ï¼Ÿ</h3>
        <p>æˆ‘å€‘è‡´åŠ›æ–¼ç‚º 4 æ­²è‡³æˆäººçš„å­¸å“¡æä¾›å°ˆæ¥­ã€å®‰å…¨çš„ç’°å¢ƒã€‚é€éçƒã€ç’°ã€æ£’ã€å¸¶ã€ç¹©çš„æ“ä½œï¼Œè¨“ç·´å”èª¿æ€§èˆ‡å°ˆæ³¨åŠ›ã€‚</p>
      </div>
    </div>

    <!-- Page: Courses -->
    <div id="courses" class="page">
      <h2>ç†±é–€èª²ç¨‹</h2>
      
      <div class="course-card">
        <h3 class="course-title">å¹¼å…’å¾‹å‹•å•Ÿè’™</h3>
        <div><span class="tag">4-6 æ­²</span><span class="tag">60 åˆ†é˜</span></div>
        <p style="margin-top: 8px; font-size: 14px;">é€ééŠæˆ²èˆ‡éŸ³æ¨‚å¼•å°ï¼Œèªè­˜èº«é«”ç¯€å¥ï¼Œæ¥è§¸åŸºç¤æ‰‹å…·æ“ä½œï¼Œå¿«æ¨‚å­¸ç¿’ã€‚</p>
      </div>

      <div class="course-card">
        <h3 class="course-title">å…’ç«¥åŸºç¤åŸ¹è¨“</h3>
        <div><span class="tag">7-10 æ­²</span><span class="tag">90 åˆ†é˜</span></div>
        <p style="margin-top: 8px; font-size: 14px;">æ‹‰ç­‹ã€èŠ­è•¾åŸºæœ¬åŠŸè¨“ç·´ï¼Œç¹©ã€åœˆã€çƒç­‰æ‰‹å…·åˆç´šæŠ€å·§æ•™å­¸ã€‚</p>
      </div>

      <div class="course-card">
        <h3 class="course-title">æˆäººç¾é«”ä¼¸å±•</h3>
        <div><span class="tag">18æ­²+</span><span class="tag">ä¸é™åŸºç¤</span></div>
        <p style="margin-top: 8px; font-size: 14px;">çµåˆé«”æ“ä¼¸å±•èˆ‡çš®æ‹‰ææ–¯ï¼Œæ”¾é¬†ç·Šç¹ƒè‚Œè‚‰ï¼Œé›•å¡‘å„ªç¾é«”æ…‹ã€‚</p>
      </div>
    </div>

    <!-- Page: Schedule -->
    <div id="schedule" class="page">
      <h2>èª²è¡¨èˆ‡è²»ç”¨</h2>
      
      <div class="card">
        <h3>æœ¬é€±èª²è¡¨</h3>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>æ™‚æ®µ</th>
                <th>å…­</th>
                <th>æ—¥</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>10:00</td>
                <td>å¹¼å…’å¾‹å‹•</td>
                <td>å¹¼å…’å¾‹å‹•</td>
              </tr>
              <tr>
                <td>14:00</td>
                <td>å…’ç«¥åŸºç¤</td>
                <td>å…’ç«¥åŸºç¤</td>
              </tr>
              <tr>
                <td>16:00</td>
                <td>é¸æ‰‹åŸ¹è¨“</td>
                <td>-</td>
              </tr>
            </tbody>
          </table>
        </div>
        <p style="font-size: 12px; color: #999; margin-top: 10px;">* å¹³æ—¥æ™šé–“èª²ç¨‹è«‹æ´½è©¢æ•™ç·´</p>
      </div>

      <div class="card">
        <h3>è²»ç”¨æ–¹æ¡ˆ</h3>
        <table style="width: 100%">
          <tr>
            <td>å–®å ‚é«”é©—</td>
            <td style="text-align: right; font-weight: bold; color: var(--secondary);">$350</td>
          </tr>
          <tr>
            <td>ä¸€æœŸ (8å ‚)</td>
            <td style="text-align: right; font-weight: bold; color: var(--secondary);">$4,800</td>
          </tr>
          <tr>
            <td>ä¸€æœŸ (16å ‚)</td>
            <td style="text-align: right; font-weight: bold; color: var(--secondary);">$8,800</td>
          </tr>
        </table>
      </div>
    </div>

    <!-- Page: Contact -->
    <div id="contact" class="page">
      <h2>é ç´„é«”é©—</h2>
      
      <!-- User Info (Hidden until LIFF loads) -->
      <div id="user-info">
        <img id="user-avatar" src="" alt="">
        <span>Hi, <b id="user-name">è¨ªå®¢</b></span>
      </div>

      <div class="card">
        <p>å¡«å¯«ä¸‹æ–¹è¡¨å–®ï¼Œæˆ‘å€‘æœƒå°‡æ‚¨çš„é ç´„è³‡è¨Šç›´æ¥å‚³é€è‡³èŠå¤©å®¤ï¼Œä¸¦ç›¡å¿«ç¢ºèªã€‚</p>
        
        <form id="bookingForm">
          <div class="form-group">
            <label class="form-label">è¯çµ¡äººå§“å</label>
            <input type="text" id="inputName" class="form-input" placeholder="è«‹è¼¸å…¥å§“å">
          </div>
          <div class="form-group">
            <label class="form-label">è¯çµ¡é›»è©±</label>
            <input type="tel" id="inputPhone" class="form-input" placeholder="0912-345-678">
          </div>
          <div class="form-group">
            <label class="form-label">æ„Ÿèˆˆè¶£çš„èª²ç¨‹</label>
            <select id="inputCourse" class="form-input" style="background: white;">
              <option value="å¹¼å…’å¾‹å‹•å•Ÿè’™">å¹¼å…’å¾‹å‹•å•Ÿè’™ (4-6æ­²)</option>
              <option value="å…’ç«¥åŸºç¤åŸ¹è¨“">å…’ç«¥åŸºç¤åŸ¹è¨“ (7-10æ­²)</option>
              <option value="æˆäººç¾é«”ä¼¸å±•">æˆäººç¾é«”ä¼¸å±• (æˆäºº)</option>
              <option value="å…¶ä»–è«®è©¢">å…¶ä»–è«®è©¢</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">å‚™è¨»ç•™è¨€</label>
            <textarea id="inputMemo" class="form-textarea" rows="3" placeholder="ä¾‹å¦‚ï¼šå°æœ‹å‹å®Œå…¨æ²’åŸºç¤..."></textarea>
          </div>
          
          <button type="button" id="btnSend" class="btn-submit">å‚³é€é ç´„è³‡è¨Š</button>
        </form>
      </div>

      <div class="card" style="text-align: center; background: transparent; box-shadow: none; border: none;">
        <p style="font-size: 13px; color: #999;">ğŸ“ å°åŒ—å¸‚é«”è‚²è·¯ 123 è™Ÿ 2 æ¨“<br>ğŸ“ (02) 2345-6789</p>
      </div>
    </div>

  </main>

  <!-- Bottom Navigation Bar -->
  <nav class="bottom-nav">
    <button class="nav-item active" onclick="switchTab('home')">
      <span class="nav-icon">ğŸ </span>
      <span>é¦–é </span>
    </button>
    <button class="nav-item" onclick="switchTab('courses')">
      <span class="nav-icon">ğŸ¤¸â€â™€ï¸</span>
      <span>èª²ç¨‹</span>
    </button>
    <button class="nav-item" onclick="switchTab('schedule')">
      <span class="nav-icon">ğŸ“…</span>
      <span>èª²è¡¨</span>
    </button>
    <button class="nav-item" onclick="switchTab('contact')">
      <span class="nav-icon">ğŸ“</span>
      <span>é ç´„</span>
    </button>
  </nav>

  <script>
    // --- 1. åˆå§‹åŒ–è¨­å®š ---
    // è«‹å°‡æ‚¨çš„ LIFF ID å¡«å…¥ä¸‹æ–¹ (æ ¼å¼å¦‚: 1234567890-AbcdEfgh)
    // å¦‚æœå°šæœªç”³è«‹ LIFFï¼Œè«‹å…ˆè‡³ LINE Developers Console å»ºç«‹ LIFF App
    const MY_LIFF_ID = "YOUR_LIFF_ID_HERE"; 

    // --- 2. é é¢åˆ‡æ›é‚è¼¯ ---
    function switchTab(tabId) {
      // éš±è—æ‰€æœ‰é é¢
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      // é¡¯ç¤ºç›®æ¨™é é¢
      document.getElementById(tabId).classList.add('active');
      
      // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
      document.querySelectorAll('.nav-item').forEach(btn => btn.classList.remove('active'));
      // é€™è£¡ç°¡å–®åˆ¤å®šï¼Œå¯¦éš›å°ˆæ¡ˆå¯ç”¨ data-target å±¬æ€§
      const indexMap = { 'home': 0, 'courses': 1, 'schedule': 2, 'contact': 3 };
      document.querySelectorAll('.nav-item')[indexMap[tabId]].classList.add('active');

      // æ»¾å‹•åˆ°é ‚éƒ¨
      window.scrollTo(0, 0);
    }

    // --- 3. LIFF æ•´åˆé‚è¼¯ ---
    async function initializeLiff() {
      try {
        await liff.init({ liffId: MY_LIFF_ID });
        
        if (liff.isLoggedIn()) {
          // å–å¾—ä½¿ç”¨è€…è³‡æ–™
          const profile = await liff.getProfile();
          document.getElementById('user-name').textContent = profile.displayName;
          if(profile.pictureUrl) {
            document.getElementById('user-avatar').src = profile.pictureUrl;
          }
          document.getElementById('user-info').style.display = 'flex';
          
          // è‡ªå‹•å¡«å…¥å§“å (é¸ç”¨)
          // document.getElementById('inputName').value = profile.displayName;
        } else {
          // å¦‚æœæ˜¯å¤–éƒ¨ç€è¦½å™¨é–‹å•Ÿï¼Œæç¤ºç™»å…¥ (é¸ç”¨)
          // liff.login(); 
        }
      } catch (err) {
        console.log('LIFF Initialization failed', err);
        // å¦‚æœæ²’æœ‰ LIFF ID æˆ–åœ¨ä¸€èˆ¬ç€è¦½å™¨æ¸¬è©¦ï¼Œé é¢ä»å¯é‹ä½œï¼Œåªæ˜¯ç„¡æ³•è‡ªå‹•å‚³è¨Š
      }
    }

    // --- 4. è¡¨å–®å‚³é€é‚è¼¯ ---
    document.getElementById('btnSend').addEventListener('click', async () => {
      const name = document.getElementById('inputName').value;
      const phone = document.getElementById('inputPhone').value;
      const course = document.getElementById('inputCourse').value;
      const memo = document.getElementById('inputMemo').value;

      if (!name || !phone) {
        alert('è«‹å¡«å¯«å§“åèˆ‡é›»è©±');
        return;
      }

      // çµ„åˆè¨Šæ¯æ–‡å­—
      const messageText = `ã€å®˜ç¶²é ç´„ã€‘\nå§“åï¼š${name}\né›»è©±ï¼š${phone}\nèª²ç¨‹ï¼š${course}\nå‚™è¨»ï¼š${memo}`;

      if (liff.isInClient()) {
        // åœ¨ LINE App å…§ï¼šç›´æ¥å‚³é€è¨Šæ¯çµ¦å®˜æ–¹å¸³è™Ÿ
        try {
          await liff.sendMessages([{ type: 'text', text: messageText }]);
          alert('é ç´„è¨Šæ¯å·²é€å‡ºï¼æˆ‘å€‘æœƒç›¡å¿«è¯çµ¡æ‚¨ã€‚');
          liff.closeWindow(); // é€å‡ºå¾Œé—œé–‰è¦–çª—
        } catch (error) {
          alert('å‚³é€å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦');
        }
      } else {
        // åœ¨ä¸€èˆ¬ç€è¦½å™¨ (Chrome/Safari)ï¼šè·³è½‰åˆ° LINE URL Scheme
        // é€™æœƒæ‰“é–‹ LINE ä¸¦å°‡æ–‡å­—å¸¶å…¥è¼¸å…¥æ¡†
        const encodedText = encodeURIComponent(messageText);
        window.location.href = `https://line.me/R/oaMessage/@YOUR_BASIC_ID/?${encodedText}`;
        
        // å‚™è¨»ï¼šå¦‚æœä¸ä½¿ç”¨ oaMessageï¼Œä¹Ÿå¯ä»¥å–®ç´”é¡¯ç¤º Alert
        alert('æ„Ÿè¬æ‚¨çš„å¡«å¯«ï¼(ç”±æ–¼æ‚¨ä¸åœ¨ LINE å…§é–‹å•Ÿï¼Œè«‹æ‰‹å‹•è¯çµ¡æˆ‘å€‘)');
      }
    });

    // å•Ÿå‹• LIFF
    // å¦‚æœæ‚¨é‚„æ²’ç”³è«‹ LIFF IDï¼Œé€™è¡Œæœƒå ±éŒ¯ï¼Œä½†ç¶²é  UI ä»æœƒé¡¯ç¤º
    if (MY_LIFF_ID !== "YOUR_LIFF_ID_HERE") {
        initializeLiff();
    }
  </script>
</body>
</html>
